
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.1.4.RELEASE)

2020-01-24 02:08:02.228  INFO 15072 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : Starting BankApplication v0.0.1-SNAPSHOT on antolovic-Lenovo-Legion-Y530-15ICH with PID 15072 (/home/antolovic/KP_SEP/KP/bank/target/bank.jar started by antolovic in /home/antolovic/KP_SEP/KP)
2020-01-24 02:08:02.273  INFO 15072 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : No active profile set, falling back to default profiles: default
2020-01-24 02:08:08.687  INFO 15072 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.
2020-01-24 02:08:09.353  INFO 15072 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 585ms. Found 5 repository interfaces.
2020-01-24 02:08:12.830  INFO 15072 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$EnhancerBySpringCGLIB$$da0b12c3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-24 02:08:13.052  INFO 15072 --- [           main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2020-01-24 02:08:13.305  INFO 15072 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$35734dc4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-24 02:08:13.428  INFO 15072 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$b4f39af6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-24 02:08:16.607  INFO 15072 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8091 (https)
2020-01-24 02:08:16.887  INFO 15072 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-01-24 02:08:16.888  INFO 15072 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.17]
2020-01-24 02:08:17.533  INFO 15072 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-01-24 02:08:17.534  INFO 15072 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 14796 ms
2020-01-24 02:08:20.153  INFO 15072 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-01-24 02:08:21.472  INFO 15072 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-01-24 02:08:21.968  INFO 15072 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2020-01-24 02:08:22.311  INFO 15072 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.9.Final}
2020-01-24 02:08:22.323  INFO 15072 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found
2020-01-24 02:08:23.388  INFO 15072 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2020-01-24 02:08:25.279  INFO 15072 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2020-01-24 02:08:31.234  INFO 15072 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-01-24 02:08:38.549  INFO 15072 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2020-01-24 02:08:38.857  WARN 15072 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-01-24 02:08:43.865  INFO 15072 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8091 (https) with context path ''
2020-01-24 02:08:43.868  INFO 15072 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : Started BankApplication in 44.76 seconds (JVM running for 46.484)
2020-01-24 02:10:27.892  INFO 15072 --- [nio-8091-exec-9] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-01-24 02:10:27.893  INFO 15072 --- [nio-8091-exec-9] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-01-24 02:10:27.911  INFO 15072 --- [nio-8091-exec-9] o.s.web.servlet.DispatcherServlet        : Completed initialization in 18 ms
2020-01-24 02:10:28.002  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Processing request from Bank Microservice
2020-01-24 02:10:28.002  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Finding client that will receive payment
2020-01-24 02:10:28.026  INFO 15072 --- [nio-8091-exec-9] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
Hibernate: select client0_.id as id1_2_, client0_.account_id as account_6_2_, client0_.first_name as first_na2_2_, client0_.last_name as last_nam3_2_, client0_.merchant_id as merchant4_2_, client0_.merchant_password as merchant5_2_ from client client0_ where client0_.merchant_id=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
Hibernate: select client0_.id as id1_2_2_, client0_.account_id as account_6_2_2_, client0_.first_name as first_na2_2_2_, client0_.last_name as last_nam3_2_2_, client0_.merchant_id as merchant4_2_2_, client0_.merchant_password as merchant5_2_2_, account1_.id as id1_0_0_, account1_.amount as amount2_0_0_, cards2_.account_id as account_6_1_4_, cards2_.id as id1_1_4_, cards2_.id as id1_1_1_, cards2_.account_id as account_6_1_1_, cards2_.holder_name as holder_n2_1_1_, cards2_.pan as pan3_1_1_, cards2_.security_code as security4_1_1_, cards2_.valid_to as valid_to5_1_1_ from client client0_ left outer join account account1_ on client0_.account_id=account1_.id left outer join card cards2_ on account1_.id=cards2_.account_id where client0_.account_id=?
2020-01-24 02:10:28.158  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Client with provided merchant id was found
2020-01-24 02:10:28.158  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating payment
Hibernate: insert into payment (amount, error_url, failed_url, merchant_id, success_url, url) values (?, ?, ?, ?, ?, ?)
2020-01-24 02:10:28.194  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment saved in bank database
2020-01-24 02:10:28.195  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Generating response for Bank Microservice with payment url
2020-01-24 02:10:28.199  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Generated response: ExternalBankPaymentResponse{id=14, url='https://localhost:4300/banka/card/dbc80e8d-d0f3-4bee-ab68-5804fd5ab5da'}
4381311001277948dsads6392020-02-01
dbc80e8d-d0f3-4bee-ab68-5804fd5ab5da
2020-01-24 02:10:44.868  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating transaction
2020-01-24 02:10:44.868  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find payment on provided url..
Hibernate: select payment0_.id as id1_3_, payment0_.amount as amount2_3_, payment0_.error_url as error_ur3_3_, payment0_.failed_url as failed_u4_3_, payment0_.merchant_id as merchant7_3_, payment0_.success_url as success_5_3_, payment0_.url as url6_3_ from payment payment0_ where payment0_.url=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
5.00rs.ac.uns.ftn.bank.model.Account@746da831dbc80e8d-d0f3-4bee-ab68-5804fd5ab5da14https://localhost:8771/bank/api/bankms/13/successful
2020-01-24 02:10:44.890  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find card with provided pan number..
Hibernate: select card0_.id as id1_1_, card0_.account_id as account_6_1_, card0_.holder_name as holder_n2_1_, card0_.pan as pan3_1_, card0_.security_code as security4_1_, card0_.valid_to as valid_to5_1_ from card card0_ where card0_.pan=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
PAN:    4381311001277948
CARD:   rs.ac.uns.ftn.bank.model.Card@3c417441
2020-01-24 02:10:44.897  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Provided Card Data is valid.
2020-01-24 02:10:44.897  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Checking if there is enough funding for payment..
Hibernate: update account set amount=? where id=?
Hibernate: update account set amount=? where id=?
Hibernate: insert into transaction (amount, payer_id, recipient_id, valid) values (?, ?, ?, ?)
2020-01-24 02:10:45.201  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment transaction is saved in bank database.
2020-01-24 02:12:52.210  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Processing request from Bank Microservice
2020-01-24 02:12:52.211  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Finding client that will receive payment
Hibernate: select client0_.id as id1_2_, client0_.account_id as account_6_2_, client0_.first_name as first_na2_2_, client0_.last_name as last_nam3_2_, client0_.merchant_id as merchant4_2_, client0_.merchant_password as merchant5_2_ from client client0_ where client0_.merchant_id=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
Hibernate: select client0_.id as id1_2_2_, client0_.account_id as account_6_2_2_, client0_.first_name as first_na2_2_2_, client0_.last_name as last_nam3_2_2_, client0_.merchant_id as merchant4_2_2_, client0_.merchant_password as merchant5_2_2_, account1_.id as id1_0_0_, account1_.amount as amount2_0_0_, cards2_.account_id as account_6_1_4_, cards2_.id as id1_1_4_, cards2_.id as id1_1_1_, cards2_.account_id as account_6_1_1_, cards2_.holder_name as holder_n2_1_1_, cards2_.pan as pan3_1_1_, cards2_.security_code as security4_1_1_, cards2_.valid_to as valid_to5_1_1_ from client client0_ left outer join account account1_ on client0_.account_id=account1_.id left outer join card cards2_ on account1_.id=cards2_.account_id where client0_.account_id=?
2020-01-24 02:12:52.215  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Client with provided merchant id was found
2020-01-24 02:12:52.215  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating payment
Hibernate: insert into payment (amount, error_url, failed_url, merchant_id, success_url, url) values (?, ?, ?, ?, ?, ?)
2020-01-24 02:12:52.227  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment saved in bank database
2020-01-24 02:12:52.227  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Generating response for Bank Microservice with payment url
2020-01-24 02:12:52.227  INFO 15072 --- [nio-8091-exec-7] r.a.u.f.bank.payment.PaymentServiceImpl  : Generated response: ExternalBankPaymentResponse{id=15, url='https://localhost:4300/banka/card/6ab4695a-9a54-4b4a-a08d-51a412da42f8'}
4381311001277948dsads6392020-02-01
6ab4695a-9a54-4b4a-a08d-51a412da42f8
2020-01-24 02:13:09.967  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating transaction
2020-01-24 02:13:09.967  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find payment on provided url..
Hibernate: select payment0_.id as id1_3_, payment0_.amount as amount2_3_, payment0_.error_url as error_ur3_3_, payment0_.failed_url as failed_u4_3_, payment0_.merchant_id as merchant7_3_, payment0_.success_url as success_5_3_, payment0_.url as url6_3_ from payment payment0_ where payment0_.url=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
5.00rs.ac.uns.ftn.bank.model.Account@276ab986ab4695a-9a54-4b4a-a08d-51a412da42f815https://localhost:8771/bank/api/bankms/14/successful
2020-01-24 02:13:09.970  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find card with provided pan number..
Hibernate: select card0_.id as id1_1_, card0_.account_id as account_6_1_, card0_.holder_name as holder_n2_1_, card0_.pan as pan3_1_, card0_.security_code as security4_1_, card0_.valid_to as valid_to5_1_ from card card0_ where card0_.pan=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
PAN:    4381311001277948
CARD:   rs.ac.uns.ftn.bank.model.Card@535475df
2020-01-24 02:13:09.976  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Provided Card Data is valid.
2020-01-24 02:13:09.976  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Checking if there is enough funding for payment..
Hibernate: update account set amount=? where id=?
Hibernate: update account set amount=? where id=?
Hibernate: insert into transaction (amount, payer_id, recipient_id, valid) values (?, ?, ?, ?)
2020-01-24 02:13:10.159  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment transaction is saved in bank database.
2020-01-24 02:15:08.746  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Processing request from Bank Microservice
2020-01-24 02:15:08.746  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Finding client that will receive payment
Hibernate: select client0_.id as id1_2_, client0_.account_id as account_6_2_, client0_.first_name as first_na2_2_, client0_.last_name as last_nam3_2_, client0_.merchant_id as merchant4_2_, client0_.merchant_password as merchant5_2_ from client client0_ where client0_.merchant_id=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
Hibernate: select client0_.id as id1_2_2_, client0_.account_id as account_6_2_2_, client0_.first_name as first_na2_2_2_, client0_.last_name as last_nam3_2_2_, client0_.merchant_id as merchant4_2_2_, client0_.merchant_password as merchant5_2_2_, account1_.id as id1_0_0_, account1_.amount as amount2_0_0_, cards2_.account_id as account_6_1_4_, cards2_.id as id1_1_4_, cards2_.id as id1_1_1_, cards2_.account_id as account_6_1_1_, cards2_.holder_name as holder_n2_1_1_, cards2_.pan as pan3_1_1_, cards2_.security_code as security4_1_1_, cards2_.valid_to as valid_to5_1_1_ from client client0_ left outer join account account1_ on client0_.account_id=account1_.id left outer join card cards2_ on account1_.id=cards2_.account_id where client0_.account_id=?
2020-01-24 02:15:08.752  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Client with provided merchant id was found
2020-01-24 02:15:08.752  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating payment
Hibernate: insert into payment (amount, error_url, failed_url, merchant_id, success_url, url) values (?, ?, ?, ?, ?, ?)
2020-01-24 02:15:08.758  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment saved in bank database
2020-01-24 02:15:08.758  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Generating response for Bank Microservice with payment url
2020-01-24 02:15:08.758  INFO 15072 --- [nio-8091-exec-9] r.a.u.f.bank.payment.PaymentServiceImpl  : Generated response: ExternalBankPaymentResponse{id=16, url='https://localhost:4300/banka/card/a75364a9-c464-4140-909a-0ea1d827e5c6'}
4381311001277948dsads6392020-02-01
a75364a9-c464-4140-909a-0ea1d827e5c6
2020-01-24 02:15:19.273  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating transaction
2020-01-24 02:15:19.274  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find payment on provided url..
Hibernate: select payment0_.id as id1_3_, payment0_.amount as amount2_3_, payment0_.error_url as error_ur3_3_, payment0_.failed_url as failed_u4_3_, payment0_.merchant_id as merchant7_3_, payment0_.success_url as success_5_3_, payment0_.url as url6_3_ from payment payment0_ where payment0_.url=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
5.00rs.ac.uns.ftn.bank.model.Account@570a2335a75364a9-c464-4140-909a-0ea1d827e5c616https://localhost:8771/bank/api/bankms/15/successful
2020-01-24 02:15:19.277  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find card with provided pan number..
Hibernate: select card0_.id as id1_1_, card0_.account_id as account_6_1_, card0_.holder_name as holder_n2_1_, card0_.pan as pan3_1_, card0_.security_code as security4_1_, card0_.valid_to as valid_to5_1_ from card card0_ where card0_.pan=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
PAN:    4381311001277948
CARD:   rs.ac.uns.ftn.bank.model.Card@cecebb5
2020-01-24 02:15:19.280  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Provided Card Data is valid.
2020-01-24 02:15:19.280  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Checking if there is enough funding for payment..
Hibernate: update account set amount=? where id=?
Hibernate: update account set amount=? where id=?
Hibernate: insert into transaction (amount, payer_id, recipient_id, valid) values (?, ?, ?, ?)
2020-01-24 02:15:19.384  INFO 15072 --- [nio-8091-exec-6] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment transaction is saved in bank database.
2020-01-24 02:15:33.940  INFO 15072 --- [       Thread-2] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2020-01-24 02:15:33.942  INFO 15072 --- [       Thread-2] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-01-24 02:15:33.945  INFO 15072 --- [       Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-01-24 02:15:33.998  INFO 15072 --- [       Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
