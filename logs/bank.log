
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::        (v2.1.4.RELEASE)

2020-01-23 08:07:51.584  INFO 11208 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : Starting BankApplication v0.0.1-SNAPSHOT on antolovic-Lenovo-Legion-Y530-15ICH with PID 11208 (/home/antolovic/KP_SEP/KP/bank/target/bank.jar started by antolovic in /home/antolovic/KP_SEP/KP)
2020-01-23 08:07:51.593  INFO 11208 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : No active profile set, falling back to default profiles: default
2020-01-23 08:07:55.725  INFO 11208 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.
2020-01-23 08:07:56.236  INFO 11208 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 464ms. Found 5 repository interfaces.
2020-01-23 08:07:58.359  INFO 11208 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$EnhancerBySpringCGLIB$$ebf2d3c6] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-23 08:07:58.560  INFO 11208 --- [           main] .w.s.a.s.AnnotationActionEndpointMapping : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]
2020-01-23 08:07:58.852  INFO 11208 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$475b0ec7] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-23 08:07:58.908  INFO 11208 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.hateoas.config.HateoasConfiguration' of type [org.springframework.hateoas.config.HateoasConfiguration$$EnhancerBySpringCGLIB$$c6db5bf9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-01-23 08:08:01.112  INFO 11208 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8091 (https)
2020-01-23 08:08:01.337  INFO 11208 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2020-01-23 08:08:01.340  INFO 11208 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.17]
2020-01-23 08:08:01.693  INFO 11208 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2020-01-23 08:08:01.726  INFO 11208 --- [           main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 9890 ms
2020-01-23 08:08:03.337  INFO 11208 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2020-01-23 08:08:04.245  INFO 11208 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2020-01-23 08:08:04.602  INFO 11208 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2020-01-23 08:08:05.199  INFO 11208 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.9.Final}
2020-01-23 08:08:05.208  INFO 11208 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found
2020-01-23 08:08:06.191  INFO 11208 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}
2020-01-23 08:08:07.519  INFO 11208 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2020-01-23 08:08:14.279  INFO 11208 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-01-23 08:08:24.829  INFO 11208 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2020-01-23 08:08:25.378  WARN 11208 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-01-23 08:08:34.316  INFO 11208 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8091 (https) with context path ''
2020-01-23 08:08:34.338  INFO 11208 --- [           main] rs.ac.uns.ftn.bank.BankApplication       : Started BankApplication in 45.247 seconds (JVM running for 46.957)
2020-01-23 08:10:39.715  INFO 11208 --- [nio-8091-exec-8] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2020-01-23 08:10:39.717  INFO 11208 --- [nio-8091-exec-8] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2020-01-23 08:10:39.740  INFO 11208 --- [nio-8091-exec-8] o.s.web.servlet.DispatcherServlet        : Completed initialization in 22 ms
2020-01-23 08:10:39.844  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Processing request from Bank Microservice
2020-01-23 08:10:39.844  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Finding client that will receive payment
2020-01-23 08:10:39.867  INFO 11208 --- [nio-8091-exec-8] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
Hibernate: select client0_.id as id1_2_, client0_.account_id as account_6_2_, client0_.first_name as first_na2_2_, client0_.last_name as last_nam3_2_, client0_.merchant_id as merchant4_2_, client0_.merchant_password as merchant5_2_ from client client0_ where client0_.merchant_id=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
Hibernate: select client0_.id as id1_2_2_, client0_.account_id as account_6_2_2_, client0_.first_name as first_na2_2_2_, client0_.last_name as last_nam3_2_2_, client0_.merchant_id as merchant4_2_2_, client0_.merchant_password as merchant5_2_2_, account1_.id as id1_0_0_, account1_.amount as amount2_0_0_, cards2_.account_id as account_6_1_4_, cards2_.id as id1_1_4_, cards2_.id as id1_1_1_, cards2_.account_id as account_6_1_1_, cards2_.holder_name as holder_n2_1_1_, cards2_.pan as pan3_1_1_, cards2_.security_code as security4_1_1_, cards2_.valid_to as valid_to5_1_1_ from client client0_ left outer join account account1_ on client0_.account_id=account1_.id left outer join card cards2_ on account1_.id=cards2_.account_id where client0_.account_id=?
2020-01-23 08:10:39.983  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Client with provided merchant id was found
2020-01-23 08:10:39.983  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating payment
Hibernate: insert into payment (amount, error_url, failed_url, merchant_id, success_url, url) values (?, ?, ?, ?, ?, ?)
2020-01-23 08:10:40.019  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment saved in bank database
2020-01-23 08:10:40.019  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Generating response for Bank Microservice with payment url
2020-01-23 08:10:40.025  INFO 11208 --- [nio-8091-exec-8] r.a.u.f.bank.payment.PaymentServiceImpl  : Generated response: ExternalBankPaymentResponse{id=10, url='banka/card/09625f98-620d-4df6-b5b7-d794c63f5bef'}
4381311001277948das6392020-02-01
09625f98-620d-4df6-b5b7-d794c63f5bef
2020-01-23 08:11:31.766  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Creating transaction
2020-01-23 08:11:31.767  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find payment on provided url..
Hibernate: select payment0_.id as id1_3_, payment0_.amount as amount2_3_, payment0_.error_url as error_ur3_3_, payment0_.failed_url as failed_u4_3_, payment0_.merchant_id as merchant7_3_, payment0_.success_url as success_5_3_, payment0_.url as url6_3_ from payment payment0_ where payment0_.url=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
5.00rs.ac.uns.ftn.bank.model.Account@7574f9e709625f98-620d-4df6-b5b7-d794c63f5bef10https://localhost:9000/nc/casopis/8e73a4bb-e000-4e33-ae4f-906776cb3834/true
2020-01-23 08:11:31.794  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Trying to find card with provided pan number..
Hibernate: select card0_.id as id1_1_, card0_.account_id as account_6_1_, card0_.holder_name as holder_n2_1_, card0_.pan as pan3_1_, card0_.security_code as security4_1_, card0_.valid_to as valid_to5_1_ from card card0_ where card0_.pan=?
Hibernate: select account0_.id as id1_0_0_, account0_.amount as amount2_0_0_, cards1_.account_id as account_6_1_1_, cards1_.id as id1_1_1_, cards1_.id as id1_1_2_, cards1_.account_id as account_6_1_2_, cards1_.holder_name as holder_n2_1_2_, cards1_.pan as pan3_1_2_, cards1_.security_code as security4_1_2_, cards1_.valid_to as valid_to5_1_2_, client2_.id as id1_2_3_, client2_.account_id as account_6_2_3_, client2_.first_name as first_na2_2_3_, client2_.last_name as last_nam3_2_3_, client2_.merchant_id as merchant4_2_3_, client2_.merchant_password as merchant5_2_3_ from account account0_ left outer join card cards1_ on account0_.id=cards1_.account_id left outer join client client2_ on account0_.id=client2_.account_id where account0_.id=?
PAN:    4381311001277948
CARD:   rs.ac.uns.ftn.bank.model.Card@1004ec4
2020-01-23 08:11:31.803  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Provided Card Data is valid.
2020-01-23 08:11:31.804  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Checking if there is enough funding for payment..
Hibernate: update account set amount=? where id=?
Hibernate: update account set amount=? where id=?
Hibernate: insert into transaction (amount, payer_id, recipient_id, valid) values (?, ?, ?, ?)
2020-01-23 08:11:31.844  INFO 11208 --- [nio-8091-exec-2] r.a.u.f.bank.payment.PaymentServiceImpl  : Payment transaction is saved in bank database.
2020-01-23 08:11:45.263  INFO 11208 --- [       Thread-2] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2020-01-23 08:11:45.270  INFO 11208 --- [       Thread-2] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2020-01-23 08:11:45.282  INFO 11208 --- [       Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2020-01-23 08:11:45.316  INFO 11208 --- [       Thread-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
